import{a as le}from"./chunk-7DF4AP7T.js";import{$ as B,Ab as se,C,Cb as ae,Ga as I,Gb as ce,Ia as y,Ja as c,K as j,Ka as d,La as Y,M as a,Ma as J,Na as Q,Oa as X,Q as A,S as W,Ta as S,Ua as H,Wa as ee,Xa as te,Ya as ne,Z as T,_ as F,aa as $,ea as V,f as P,fa as R,ga as G,i as z,k as E,la as K,ma as Z,n as g,qa as q,r as N,t as k,ua as u,va as l,x as D,xb as ie,y as b,yb as oe,z as h,za as U,zb as re}from"./chunk-MFUVKG4D.js";function be(){return typeof window<"u"?window.navigator:void 0}function me(n){return!!(n.parentElement&&n.parentElement.nodeName.toLowerCase()==="picture")}function p(n){return n.nodeName.toLowerCase()==="img"}function ge(n,e,t){return p(n)?t&&"srcset"in n?n.srcset=e:n.src=e:n.style.backgroundImage=`url('${e}')`,n}function M(n){return e=>{let t=e.parentElement.getElementsByTagName("source");for(let i=0;i<t.length;i++){let o=t[i].getAttribute(n);o&&("srcset"in t[i]?t[i].srcset=o:t[i].src=o)}}}var Ce=M("defaultImage"),ue=M("lazyLoad"),Ie=M("errorImage");function _(n){return(e,t,i)=>{p(e)&&me(e)&&n(e),t&&ge(e,t,i)}}var Se=_(Ce),Le=_(ue),we=_(Ie),w=class{constructor(){this.navigator=be()}setPlatformId(e){this.platformId=e}onDestroy(e){}onAttributeChange(e){}},m={loaded:"ng-lazyloaded",loading:"ng-lazyloading",failed:"ng-failed-lazyloaded"};function de(n,e){n.className=n.className.replace(e,"")}function L(n,e){n.className.includes(e)||(n.className+=` ${e}`)}function Oe(n,e){return n.className&&n.className.includes(e)}var O=class extends w{setup(e){Se(e.element,e.defaultImagePath,e.useSrcset),e.imagePath&&L(e.element,m.loading),Oe(e.element,m.loaded)&&de(e.element,m.loaded)}finally(e){L(e.element,m.loaded),de(e.element,m.loading)}loadImage(e){if(this.skipLazyLoading(e))return[e.imagePath];let{element:t,useSrcset:i,imagePath:o,decode:r}=e,s;return p(t)&&me(t)?(s=t.parentNode.cloneNode(!0).getElementsByTagName("img")[0],ue(s),ge(s,o,i)):(s=new Image,p(t)&&t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),p(t)&&t.sizes&&(s.sizes=t.sizes),i&&"srcset"in s?s.srcset=o:s.src=o),r&&s.decode?s.decode().then(()=>o):new Promise((f,ye)=>{s.onload=()=>f(o),s.onerror=()=>ye(null)})}setErrorImage(e,t){let{element:i,useSrcset:o,errorImagePath:r}=t;we(i,r,o),L(i,m.failed)}setLoadedImage(e,t){let{element:i,useSrcset:o}=t;Le(i,e,o)}isDisabled(){return ae(this.platformId)&&!this.isBot()}skipLazyLoading(e){return this.isBot(e)}isBot(e){return this.navigator?.userAgent?/googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora\ link\ preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|duckduckbot|prerender/i.test(this.navigator.userAgent):!1}},x=class extends O{constructor(){super(...arguments),this.observers=new WeakMap,this.intersectionSubject=new z,this.uniqKey={}}getObservable(e){if(this.skipLazyLoading(e))return g({isIntersecting:!0});if(e.customObservable)return e.customObservable;let t=e.scrollContainer||this.uniqKey,i={root:e.scrollContainer||null};e.offset&&(i.rootMargin=`${e.offset}px`);let o=this.observers.get(t);return o||(o=new IntersectionObserver(r=>this.loadingCallback(r),i),this.observers.set(t,o)),o.observe(e.element),P.create(r=>{let s=this.intersectionSubject.pipe(b(f=>f.target===e.element)).subscribe(r);return()=>{s.unsubscribe(),o.unobserve(e.element)}})}isVisible(e){return e.isIntersecting}loadingCallback(e){e.forEach(t=>this.intersectionSubject.next(t))}};function xe(n,e){return t=>t.pipe(a(i=>e.onStateChange.emit({reason:"observer-emit",data:i})),b(i=>n.isVisible(i,e)),C(1),a(()=>e.onStateChange.emit({reason:"start-loading"})),k(()=>n.loadImage(e)),a(()=>e.onStateChange.emit({reason:"mount-image"})),a(i=>n.setLoadedImage(i,e)),a(()=>e.onStateChange.emit({reason:"loading-succeeded"})),N(()=>!0),h(i=>(e.onStateChange.emit({reason:"loading-failed",data:i}),n.setErrorImage(i,e),g(!1))),a(()=>{e.onStateChange.emit({reason:"finally"}),n.finally(e)}))}var pe=new W("LazyLoadImageHooks"),fe=(()=>{class n{constructor(t,i,o,r){this.onStateChange=new Z,this.elementRef=t,this.ngZone=i,this.propertyChanges$=new E,this.hooks=r,this.hooks.setPlatformId(o),this.uid=Math.random().toString(36).substr(2,9)}ngOnChanges(){this.debug===!0&&!this.debugSubscription&&(this.debugSubscription=this.onStateChange.subscribe(t=>console.log(t))),this.propertyChanges$.next({element:this.elementRef.nativeElement,imagePath:this.lazyImage,defaultImagePath:this.defaultImage,errorImagePath:this.errorImage,useSrcset:this.useSrcset,offset:this.offset?this.offset|0:0,scrollContainer:this.scrollTarget,customObservable:this.customObservable,decode:this.decode,onStateChange:this.onStateChange,id:this.uid})}ngAfterContentInit(){if(this.hooks.isDisabled())return null;this.ngZone.runOutsideAngular(()=>{this.loadSubscription=this.propertyChanges$.pipe(a(t=>this.hooks.onAttributeChange(t)),a(t=>t.onStateChange.emit({reason:"setup"})),a(t=>this.hooks.setup(t)),j(t=>t.imagePath?this.hooks.getObservable(t).pipe(xe(this.hooks,t)):D())).subscribe({next:()=>null})})}ngOnDestroy(){this.propertyChanges$.pipe(C(1)).subscribe({next:t=>this.hooks.onDestroy(t)}).unsubscribe(),this.loadSubscription?.unsubscribe(),this.debugSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l(K),l(U),l(q),l(pe))},n.\u0275dir=$({type:n,selectors:[["","lazyLoad",""]],inputs:{lazyImage:[T.None,"lazyLoad","lazyImage"],defaultImage:"defaultImage",errorImage:"errorImage",scrollTarget:"scrollTarget",customObservable:"customObservable",offset:"offset",useSrcset:"useSrcset",decode:"decode",debug:"debug"},outputs:{onStateChange:"onStateChange"},features:[V]}),n})(),he=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=B({type:n}),n.\u0275inj=A({providers:[{provide:pe,useClass:x}]}),n})(),v=class n{constructor(e,t,i,o){this.left=e,this.top=t,this.right=i,this.bottom=o}static fromElement(e){let{left:t,top:i,right:o,bottom:r}=e.getBoundingClientRect();return t===0&&i===0&&o===0&&r===0?n.empty:new n(t,i,o,r)}static fromWindow(e){return new n(0,0,e.innerWidth,e.innerHeight)}inflate(e){this.left-=e,this.top-=e,this.right+=e,this.bottom+=e}intersectsWith(e){return e.left<this.right&&this.left<e.right&&e.top<this.bottom&&this.top<e.bottom}getIntersectionWith(e){let t=Math.max(this.left,e.left),i=Math.max(this.top,e.top),o=Math.min(this.right,e.right),r=Math.min(this.bottom,e.bottom);return o>=t&&r>=i?new n(t,i,o,r):n.empty}};v.empty=new v(0,0,0,0);function _e(n,e){n&1&&(c(0,"div",7),Y(1,"app-spinner"),d())}function Pe(n,e){if(n&1){let t=J();c(0,"div",2)(1,"div",3),I(2,_e,2,0,"div",4),c(3,"img",5),Q("load",function(){let o=R(t).$implicit,r=X();return G(r.onImageLoad(o))}),d()(),c(4,"div",6)(5,"h4"),S(6),te(7,"uppercase"),d(),c(8,"p"),S(9," Lorem Ipsum is simply dummy text of the printing and typesetting industry. "),d()()()}if(n&2){let t=e.$implicit;u(2),y("ngIf",!t.loaded),u(),y("lazyLoad",t.download_url)("alt",t.author),u(3),H(" ",ne(7,4,t.author)," ")}}var Ye=(()=>{let e=class e{constructor(i){this.imageService=i,this.images=[]}ngOnInit(){this.loadImages()}loadImages(){this.imagesub=this.imageService.getImages(1).pipe(h(i=>(console.error("Failed to load images:",i),g([])))).subscribe(i=>{this.images=i,this.images.forEach(o=>o.loaded=!1)})}onImageLoad(i){i.loaded=!0}ngOnDestroy(){this.imagesub.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)(l(ce))},e.\u0275cmp=F({type:e,selectors:[["app-image-gallery"]],standalone:!0,features:[ee],decls:2,vars:1,consts:[[1,"gallery"],["class","gallery-item",4,"ngFor","ngForOf"],[1,"gallery-item"],[1,"image-container"],["class","spinner",4,"ngIf"],[3,"load","lazyLoad","alt"],[1,"caption"],[1,"spinner"]],template:function(o,r){o&1&&(c(0,"div",0),I(1,Pe,10,6,"div",1),d()),o&2&&(u(),y("ngForOf",r.images))},dependencies:[se,ie,oe,re,he,fe,le],styles:[".gallery[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:repeat(auto-fill,minmax(286px,1fr));gap:20px}.gallery-item[_ngcontent-%COMP%]{box-shadow:#11111a1a 0 4px 16px,#11111a0d 0 8px 32px;overflow:hidden;transition:transform .2s;display:flex;flex-direction:column;justify-content:center;align-items:center;border:2px solid #d9d9d9;border-radius:9px 9px 6px 6px}.gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-inline-size:100%;block-size:auto;aspect-ratio:1;object-fit:cover;width:100%;height:auto;border-radius:9px 9px 0 0}img.ng-lazyloaded[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadein 2s}@keyframes _ngcontent-%COMP%_fadein{0%{opacity:0}to{opacity:1}}.image-container[_ngcontent-%COMP%]{position:relative;width:100%;padding-top:100%}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#fffc}.caption[_ngcontent-%COMP%]{font-family:Roboto;padding:10px;text-align:center}.caption[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600}.caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;color:#93999e}"]});let n=e;return n})();export{Ye as ImageGalleryComponent};
